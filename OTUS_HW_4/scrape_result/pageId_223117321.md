[Управление модифицированным комплектом драйверов с помощью групповых политик](https://dev.rutoken.ru/pages/viewpage.action?pageId=223117321)

-







Created by [Осьминина Анастасия](https://dev.rutoken.ru/display/~osminina), last modified on [Oct 31, 2025](https://dev.rutoken.ru/pages/diffpagesbyversion.action?pageId=223117321&selectedPageVersions=2&selectedPageVersions=3 "Show changes")

## - 2 [Установка модифицированного комплекта](https://dev.rutoken.ru/pages/viewpage.action?pageId=223117321\#id-%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC%D0%BE%D0%B4%D0%B8%D1%84%D0%B8%D1%86%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC%D0%BA%D0%BE%D0%BC%D0%BF%D0%BB%D0%B5%D0%BA%D1%82%D0%BE%D0%BC%D0%B4%D1%80%D0%B0%D0%B9%D0%B2%D0%B5%D1%80%D0%BE%D0%B2%D1%81%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%BE%D0%B2%D1%8B%D1%85%D0%BF%D0%BE%D0%BB%D0%B8%D1%82%D0%B8%D0%BA-%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0%D0%BC%D0%BE%D0%B4%D0%B8%D1%84%D0%B8%D1%86%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D0%BE%D0%B3%D0%BE%D0%BA%D0%BE%D0%BC%D0%BF%D0%BB%D0%B5%D0%BA%D1%82%D0%B0)   - 2.1 [Шаг 1\. Скачайте необходимый MSI-пакет](https://dev.rutoken.ru/pages/viewpage.action?pageId=223117321\#id-%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC%D0%BE%D0%B4%D0%B8%D1%84%D0%B8%D1%86%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC%D0%BA%D0%BE%D0%BC%D0%BF%D0%BB%D0%B5%D0%BA%D1%82%D0%BE%D0%BC%D0%B4%D1%80%D0%B0%D0%B9%D0%B2%D0%B5%D1%80%D0%BE%D0%B2%D1%81%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%BE%D0%B2%D1%8B%D1%85%D0%BF%D0%BE%D0%BB%D0%B8%D1%82%D0%B8%D0%BA-%D0%A8%D0%B0%D0%B31.%D0%A1%D0%BA%D0%B0%D1%87%D0%B0%D0%B9%D1%82%D0%B5%D0%BD%D0%B5%D0%BE%D0%B1%D1%85%D0%BE%D0%B4%D0%B8%D0%BC%D1%8B%D0%B9MSI-%D0%BF%D0%B0%D0%BA%D0%B5%D1%82)   - 2.2 [Шаг 2\. Установите утилиту Orca](https://dev.rutoken.ru/pages/viewpage.action?pageId=223117321\#id-%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC%D0%BE%D0%B4%D0%B8%D1%84%D0%B8%D1%86%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC%D0%BA%D0%BE%D0%BC%D0%BF%D0%BB%D0%B5%D0%BA%D1%82%D0%BE%D0%BC%D0%B4%D1%80%D0%B0%D0%B9%D0%B2%D0%B5%D1%80%D0%BE%D0%B2%D1%81%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%BE%D0%B2%D1%8B%D1%85%D0%BF%D0%BE%D0%BB%D0%B8%D1%82%D0%B8%D0%BA-%D0%A8%D0%B0%D0%B32.%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D0%B5%D1%83%D1%82%D0%B8%D0%BB%D0%B8%D1%82%D1%83Orca)   - 2.3 [Шаг 3\. Создайте MST-файл](https://dev.rutoken.ru/pages/viewpage.action?pageId=223117321\#id-%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC%D0%BE%D0%B4%D0%B8%D1%84%D0%B8%D1%86%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC%D0%BA%D0%BE%D0%BC%D0%BF%D0%BB%D0%B5%D0%BA%D1%82%D0%BE%D0%BC%D0%B4%D1%80%D0%B0%D0%B9%D0%B2%D0%B5%D1%80%D0%BE%D0%B2%D1%81%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%BE%D0%B2%D1%8B%D1%85%D0%BF%D0%BE%D0%BB%D0%B8%D1%82%D0%B8%D0%BA-%D0%A8%D0%B0%D0%B33.%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%B9%D1%82%D0%B5MST-%D1%84%D0%B0%D0%B9%D0%BB)   - 2.4 [Шаг 4\. Создайте папку в сети и настройте доступ к ней для определенных пользователей](https://dev.rutoken.ru/pages/viewpage.action?pageId=223117321\#id-%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC%D0%BE%D0%B4%D0%B8%D1%84%D0%B8%D1%86%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC%D0%BA%D0%BE%D0%BC%D0%BF%D0%BB%D0%B5%D0%BA%D1%82%D0%BE%D0%BC%D0%B4%D1%80%D0%B0%D0%B9%D0%B2%D0%B5%D1%80%D0%BE%D0%B2%D1%81%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%BE%D0%B2%D1%8B%D1%85%D0%BF%D0%BE%D0%BB%D0%B8%D1%82%D0%B8%D0%BA-%D0%A8%D0%B0%D0%B34.%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%B9%D1%82%D0%B5%D0%BF%D0%B0%D0%BF%D0%BA%D1%83%D0%B2%D1%81%D0%B5%D1%82%D0%B8%D0%B8%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%82%D0%B5%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%BA%D0%BD%D0%B5%D0%B9%D0%B4%D0%BB%D1%8F%D0%BE%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%BD%D1%8B%D1%85%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B5%D0%B9)   - 2.5 [Шаг 3\. Переместите загруженный MSI-пакет в созданную папку](https://dev.rutoken.ru/pages/viewpage.action?pageId=223117321\#id-%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC%D0%BE%D0%B4%D0%B8%D1%84%D0%B8%D1%86%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC%D0%BA%D0%BE%D0%BC%D0%BF%D0%BB%D0%B5%D0%BA%D1%82%D0%BE%D0%BC%D0%B4%D1%80%D0%B0%D0%B9%D0%B2%D0%B5%D1%80%D0%BE%D0%B2%D1%81%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%BE%D0%B2%D1%8B%D1%85%D0%BF%D0%BE%D0%BB%D0%B8%D1%82%D0%B8%D0%BA-%D0%A8%D0%B0%D0%B33.%D0%9F%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D1%81%D1%82%D0%B8%D1%82%D0%B5%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9MSI-%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B2%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%BD%D1%83%D1%8E%D0%BF%D0%B0%D0%BF%D0%BA%D1%83)   - 2.6 [Шаг 4\. Добавьте оснастку для редактирования объектов групповых политик](https://dev.rutoken.ru/pages/viewpage.action?pageId=223117321\#id-%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC%D0%BE%D0%B4%D0%B8%D1%84%D0%B8%D1%86%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC%D0%BA%D0%BE%D0%BC%D0%BF%D0%BB%D0%B5%D0%BA%D1%82%D0%BE%D0%BC%D0%B4%D1%80%D0%B0%D0%B9%D0%B2%D0%B5%D1%80%D0%BE%D0%B2%D1%81%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%BE%D0%B2%D1%8B%D1%85%D0%BF%D0%BE%D0%BB%D0%B8%D1%82%D0%B8%D0%BA-%D0%A8%D0%B0%D0%B34.%D0%94%D0%BE%D0%B1%D0%B0%D0%B2%D1%8C%D1%82%D0%B5%D0%BE%D1%81%D0%BD%D0%B0%D1%81%D1%82%D0%BA%D1%83%D0%B4%D0%BB%D1%8F%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F%D0%BE%D0%B1%D1%8A%D0%B5%D0%BA%D1%82%D0%BE%D0%B2%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%BE%D0%B2%D1%8B%D1%85%D0%BF%D0%BE%D0%BB%D0%B8%D1%82%D0%B8%D0%BA)   - 2.7 [Шаг 7\. Выберите MSI-пакет для установки в клиентских операционных системах и MST-файл с модификациями](https://dev.rutoken.ru/pages/viewpage.action?pageId=223117321\#id-%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC%D0%BE%D0%B4%D0%B8%D1%84%D0%B8%D1%86%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC%D0%BA%D0%BE%D0%BC%D0%BF%D0%BB%D0%B5%D0%BA%D1%82%D0%BE%D0%BC%D0%B4%D1%80%D0%B0%D0%B9%D0%B2%D0%B5%D1%80%D0%BE%D0%B2%D1%81%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%BE%D0%B2%D1%8B%D1%85%D0%BF%D0%BE%D0%BB%D0%B8%D1%82%D0%B8%D0%BA-%D0%A8%D0%B0%D0%B37.%D0%92%D1%8B%D0%B1%D0%B5%D1%80%D0%B8%D1%82%D0%B5MSI-%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B4%D0%BB%D1%8F%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B8%D0%B2%D0%BA%D0%BB%D0%B8%D0%B5%D0%BD%D1%82%D1%81%D0%BA%D0%B8%D1%85%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D1%8B%D1%85%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%D1%85%D0%B8MST-%D1%84%D0%B0%D0%B9%D0%BB%D1%81%D0%BC%D0%BE%D0%B4%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F%D0%BC%D0%B8)   - 2.8 [Шаг 8. Завершите установку MSI-пакетов в клиентских операционных системах, входящих в домен](https://dev.rutoken.ru/pages/viewpage.action?pageId=223117321\#id-%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC%D0%BE%D0%B4%D0%B8%D1%84%D0%B8%D1%86%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC%D0%BA%D0%BE%D0%BC%D0%BF%D0%BB%D0%B5%D0%BA%D1%82%D0%BE%D0%BC%D0%B4%D1%80%D0%B0%D0%B9%D0%B2%D0%B5%D1%80%D0%BE%D0%B2%D1%81%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%BE%D0%B2%D1%8B%D1%85%D0%BF%D0%BE%D0%BB%D0%B8%D1%82%D0%B8%D0%BA-%D0%A8%D0%B0%D0%B38.%D0%97%D0%B0%D0%B2%D0%B5%D1%80%D1%88%D0%B8%D1%82%D0%B5%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D1%83MSI-%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2%D0%B2%D0%BA%D0%BB%D0%B8%D0%B5%D0%BD%D1%82%D1%81%D0%BA%D0%B8%D1%85%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D1%8B%D1%85%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%D1%85,%D0%B2%D1%85%D0%BE%D0%B4%D1%8F%D1%89%D0%B8%D1%85%D0%B2%D0%B4%D0%BE%D0%BC%D0%B5%D0%BD) - 3 [Обновление модифицированного комплекта](https://dev.rutoken.ru/pages/viewpage.action?pageId=223117321\#id-%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC%D0%BE%D0%B4%D0%B8%D1%84%D0%B8%D1%86%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC%D0%BA%D0%BE%D0%BC%D0%BF%D0%BB%D0%B5%D0%BA%D1%82%D0%BE%D0%BC%D0%B4%D1%80%D0%B0%D0%B9%D0%B2%D0%B5%D1%80%D0%BE%D0%B2%D1%81%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%BE%D0%B2%D1%8B%D1%85%D0%BF%D0%BE%D0%BB%D0%B8%D1%82%D0%B8%D0%BA-%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC%D0%BE%D0%B4%D0%B8%D1%84%D0%B8%D1%86%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D0%BE%D0%B3%D0%BE%D0%BA%D0%BE%D0%BC%D0%BF%D0%BB%D0%B5%D0%BA%D1%82%D0%B0)

## Установка модифицированного комплекта

В установочном файле драйверов заданы определенные параметры, значения которых можно изменить перед установкой. Для этого нужно подготовить файл трансформации в формате MST, в котором указаны значения необходимых параметров. Это можно сделать с помощью бесплатной утилиты Orca, которая входит в состав Windows SDK.

Перед началом установки комплекта драйверов закройте все работающие приложения и отсоедините устройство Рутокен от компьютера.

Все действия должны быть выполнены под учетной записью пользователя с правами администратора сервера.

### Шаг 1\. Скачайте необходимый MSI-пакет

Чтобы скачать MSI-пакет, перейдите в [Центр загрузки](https://www.rutoken.ru/support/download/windows/#msi) и выберите пакет для своей версии Windows. Примите лицензионное соглашение и дождитесь автоматического скачивания пакета.

### Шаг 2\. Установите утилиту Orca

Чтобы установить утилиту:

1. Скачайте [установочный файл Windows SDK](https://developer.microsoft.com/ru-ru/windows/downloads/windows-sdk/).
2. Откройте скачанный файл и следуйте инструкциям установщика.
3. Убедитесь, что в списке устанавливаемых инструментов отмечен пункт **MSI Tools** — в него входит утилита Orca. Остальные инструменты для действий в этой инструкции не нужны.
4. После того, как установка завершится, перейдите в каталог, в который были загружены инструменты из SDK.

**Пример для Windows 10 и SDK версии 10.0.26100.0:**





```
C:\Program Files (x86)\Windows Kits\10\bin\10.0.26100.0\x86
```

5. Запустите файл `Orca-x86_<язык>.msi`, чтобы установить утилиту Orca.
По умолчанию она устанавливается в каталог `C:\Program Files (x86)\Orca.`

### Шаг 3\. Создайте MST-файл

1. Запустите утилиту Orca.
2. В утилите откройте установочный файл драйверов Рутокен.
3. В меню выберите **Transform → New transform**, чтобы создать новый файл с модификациями.





Не вносите изменения в установочный файл драйверов напрямую — это приведет к тому, что файл потеряет подпись производителя.

4. В списке слева выберите пункт **Property**. Откроется список параметров установочного файла.

5. Внесите необходимые изменения. В таблице ниже описаны параметры комплекта, для которых можно задать свое значение.





Не вносите изменения в параметры, которых нет в таблице — это может привести к проблемам с установкой и работой драйверов.







Таблица параметров драйверов Рутокен








| Параметр | Описание | Значение по умолчанию |
| **INSTALLMINIDRVONLY** | Устанавливает только минимально необходимый набор библиотек для работы с криптопровайдером Microsoft Base Smart Card Crypto Provider. <br>Может принимать значения:<br>0 — установка стандартного комплекта драйверов Рутокен;<br>1 — установка только библиотек минидрайвера Рутокен | 0 |
| **PPPINLENGTHWEIGHT** | Задает вес политики длины PIN-кода в общей (интегральной) оценке PIN-кода с точки зрения надежности. <br>Может принимать значения 0–100 | 73 |
| **PPBADPINBORDER** | Задает границу, разделяющую «слабые» и «средние» PIN-коды. <br>Может принимать значения 0–100 | 0 |
| **PPGOODPINBORDER** | Задает границу, разделяющую «средние» и «надежные» PIN-коды.<br>Может принимать значения 0–100 и должен быть не меньше значения параметра **PPBADPINBORDER** | 100 |
| **CERTSTORE** | Задает количество сертификатов, выдаваемых криптопровайдером по запросу PP\_USER\_CERTSTORE.<br>Может принимать значения:<br>0 — только сертификат по умолчанию на смарт-карте;<br>1 — все сертификаты на смарт-карте (более медленная работа) | 0 |
| **CPHIDE** | Задает способ отображения ярлыка Панели управления Рутокен.<br>Может принимать значения:<br>0 — ярлык Панели управления Рутокен отобразится на рабочем столе, не будет скрыт;<br>1 — ярлык Панели управления Рутокен не создастся на рабочем столе;<br>2 — ярлык Панели управления Рутокен не создастся на рабочем столе и не добавится в меню Пуск;<br>3 –— ярлык Панели управления Рутокен не создастся на рабочем столе, не добавится в меню Пуск и не добавится в панель управления Windows | 0 |
| **RCCHIDE** | Задает способ отображения ярлыка Центра управления Рутокен.<br>Может принимать значения:<br>0 — ярлык Центра управления Рутокен отобразится на рабочем столе, не будет скрыт;<br>1 — ярлык Центра управления Рутокен не создастся на рабочем столе;<br>2 — ярлык Центра управления Рутокен не создастся на рабочем столе и не добавится в меню Пуск |  |
| **ECPSCMINIDRV** | Задает криптопровайдер по умолчанию для модификаций Рутокен ЭЦП Смарт-карта. <br>Может принимать значения:<br>0 — Aktiv ruToken CSP v1.0;<br>1 — Microsoft Base Smart Card Crypto Provider | 1 |
| **ECPMINIDRV** | Задает криптопровайдер по умолчанию для модификаций Рутокен ЭЦП.<br>Может принимать значения:<br>0 – Aktiv ruToken CSP v1.0;<br>1 – Microsoft Base Smart Card Crypto Provider | 1 |
| **FKCMINIDRV** | Задает криптопровайдер по умолчанию для Рутокен КП.<br>Может принимать значения:<br>0 — Aktiv ruToken CSP v1.0;<br>1 — Microsoft Base Smart Card Crypto Provider | 1 |
| **SOFTKEYGEN** | Задает криптопровайдер для генерации RSA-2048 ключей на Рутокен ЭЦП.<br>Может принимать значения:<br>0 — Aktiv ruToken CSP v1.0 (аппаратная генерация);<br>1 — Microsoft Enhanced RSA and AES Cryptographic Provider (программная генерация) | 0 |
| **PPMINPINLENGTH** | Задает минимальную длину PIN-кода в символах.<br>Может принимать значения 1–16 | 1 |
| **DEFPIN** | Задает политику вывода сообщения при использовании PIN-кода по умолчанию. <br>Может принимать значения:<br>**YES**— при использовании PIN-кода по умолчанию будет выводиться сообщение « **Вы используете PIN-код по умолчанию для данного токена. Хотите поменять его сейчас?»**;<br>**NO**— такое сообщение выводиться не будет | NO |
| **PPDEFAULTPIN** | Задает политику использования PIN-кода по умолчанию. <br>Может принимать значения:<br>0 — разрешается использовать PIN-код по умолчанию; <br>1 — запрещается | 0 |
| **PPCURRENTPIN** | Задает политику использования PIN-кода, совпадающего с предыдущим PIN-кодом. <br>Может принимать значения:<br>0 — разрешается использовать PIN-код, совпадающий с предыдущим PIN-кодом; <br>1 — запрещается | 0 |
| **PPONESYMBOLPIN** | Задает политику использования PIN-кода, состоящего из одного повторяющегося символа. <br>Может принимать значения: <br>0 — разрешается использовать PIN-код, состоящий из одного повторяющегося символа; <br>1 — запрещается | 0 |
| **PPONLYLETTERS** | Задает политику использования PIN-кода, состоящего только из букв. <br>Может принимать значения: <br>0 — разрешается использовать PIN-код, состоящий только из букв; <br>1 — запрещается | 0 |
| **PPONLYNUMERALS** | Задает политику использования PIN-кода, состоящего только из цифр. <br>Может принимать значения: <br>0 — разрешается использовать PIN-код, состоящий только из цифр; <br>1 — запрещается | 0 |
| **PPBADPINBEHAVIOR** | Задает политику использования «слабого» PIN-кода. <br>Может принимать значения:<br>0 — разрешается использовать «слабый» PIN-код;<br>1 — при смене PIN-кода на «слабый» на экране отобразится предупреждающее сообщение;<br>2 — запрещается | 0 |
| **PPACCEPTABLEPINBEHAVIOR** | Задает политику использования «среднего» PIN-кода. <br>Может принимать значения:<br>0 — разрешается использовать «средний» PIN-код;<br>1 — при смене PIN-кода на «средний» на экране отобразится предупреждающее сообщение | 0 |
| **PINENCODING** | Задает политику использования символов UTF-8 в PIN-коде.<br>Может принимать значения:<br>**UTF8**— разрешается задавать PIN-код, включающий в себя символы UTF-8 (такая возможность существует только для Рутокен ЭЦП);<br>**ANSI** — запрещается | ANSI |
| **CACHEPIN** | Задает политику кеширования PIN-кода. <br>Может принимать значения **:** **YES**— PIN-код будет кешироваться и на операцию, и на процесс; <br>**NO** — PIN-код будет кешироваться только на операцию | YES |
| **VIRTRDR** | Задает число виртуальных считывателей Рутокен. <br>Может принимать значения 0–5 | 3 |
| **CSPUILEVEL** | Задает уровень отображения [необязательных диалоговых окон](https://dev.rutoken.ru/display/KB/PU1008) в Aktiv ruToken CSP v1.0. <br>Чтобы включить отображение необязательных окон, выставите значение **1** | 1 |

6. В меню выберите **Transform → Generate transform**. Укажите имя файла и сохраните его.
7. Закройте утилиту.

### Шаг 4\. Создайте папку в сети и настройте доступ к ней для определенных пользователей

Для создания папки в сети и настройки доступа к ней:

1. Создайте папку в сети.
2. Нажмите правой кнопкой мыши по названию созданной папки и выберите пункт **Общий доступ** **→ Отдельные люди.** Откроется окно **Общий доступ к файлам**.

![](https://dev.rutoken.ru/download/attachments/72451066/Individuals.png?version=1&modificationDate=1595248621000&api=v2)
3. В раскрывающемся списке выберите пункт **Поиск пользователей.** Откроется окно для выбора пользователей.

![](https://dev.rutoken.ru/download/attachments/72451066/search-users.jpg?version=1&modificationDate=1595248676000&api=v2)
4. В поле **Введите имена выбираемых объектов** укажите имя пользователя и нажмите **Проверить имена**.

![](https://dev.rutoken.ru/download/attachments/72451066/user-choice.png?version=1&modificationDate=1595248735000&api=v2)
5. Чтобы добавить выбранного пользователя в список пользователей, которым открыт доступ к папке, нажмите **ОК**.
6. В окне **Общий доступ к файлам** в строке с именем пользователя в раскрывающемся списке выберите пункт **Чтение**.

![](https://dev.rutoken.ru/download/attachments/72451066/read-only.jpg?version=1&modificationDate=1595248771000&api=v2)
7. Чтобы завершить процедуру выбора пользователей для общего доступа, нажмите **Общий доступ**.
8. Нажмите **Готово**. В результате выбранные пользователи получат доступ к созданной в сети папке.

### Шаг 3\. Переместите загруженный MSI-пакет в созданную папку

### Шаг 4\. Добавьте оснастку для редактирования объектов групповых политик

Для добавления оснастки для редактирования объектов групповых политик:

01. Запустите диалоговое окно. Для этого нажмите комбинацию клавиш **Win+R**.
02. В диалоговом окне введите команду "mmc" и нажмите **ОК**.

    ![](https://dev.rutoken.ru/download/attachments/72451066/mmc.jpg?version=1&modificationDate=1595248833000&api=v2)
03. В окне **Консоль 1** перейдите в меню **Файл** → **Добавить или удалить оснастку.**

    **![](https://dev.rutoken.ru/download/attachments/72451066/add-snap-in.jpg?version=1&modificationDate=1595248872000&api=v2)**
04. В левой части окна **Добавление и удаление оснастки** выберите оснастку **Редактор управления групповыми политиками**.
05. Нажмите **Добавить**.

    ![](https://dev.rutoken.ru/download/attachments/72451066/select-snap-in.jpg?version=1&modificationDate=1595248909000&api=v2)
06. В окне **Выбор объекта групповой политики** нажмите **Обзор**.

    ![](https://dev.rutoken.ru/download/attachments/72451066/select-group-policy-object.png?version=1&modificationDate=1595248970000&api=v2)
07. В раскрывающемся списке **Поиск в** выберите название домена.
08. В свободном месте окна **Поиск объектов групповой политики** щелкните правой кнопкой мыши и выберите **Создать**.

    ![](https://dev.rutoken.ru/download/attachments/72451066/create-unit.jpg?version=1&modificationDate=1595249002000&api=v2)
09. В окне отобразится новый объект групповой политики. Нажмите на название нового объекта и измените его на "Rutoken".

    ![](https://dev.rutoken.ru/download/attachments/72451066/rutoken.jpg?version=1&modificationDate=1595249032000&api=v2)
10. Щелкните по названию нового объекта левой кнопкой мыши и нажмите **ОК**.
11. В окне **Выбор объекта групповой политики** нажмите **Готово**.
12. В окне **Добавление и удаление оснастки** нажмите **ОК**.
13. Закройте окно **Консоль 1**.
14. Чтобы сохранить изменения, нажмите **Да**.

### Шаг 7\. Выберите MSI-пакет для установки в клиентских операционных системах и MST-файл с модификациями

Для установки MSI-пакета с измененными параметрами:

01. Откройте **Администрирование**.
02. Два раза щелкните по названию оснастки **Управление групповой политикой**.
03. В левой части окна **Управление групповой политикой** нажмите правой кнопкой мыши на объект **Rutoken** и выберите **Изменить.**

    **![](https://dev.rutoken.ru/download/attachments/72451066/modify-Rutoken.jpg?version=2&modificationDate=1595249224000&api=v2)**
04. В левой части окна **Редактор управления групповыми политиками** нажмите правой кнопкой мыши на политику **Установка программ** и выберите **Создать** **→ Пакет.** **![](https://dev.rutoken.ru/download/attachments/72451066/create-package.jpg?version=1&modificationDate=1595249120000&api=v2)**
05. В списке методов развертывания выберите **Особый → ОК**.Откроются свойства пакета.

    ![](https://dev.rutoken.ru/download/attachments/223117321/special_package.png?version=1&modificationDate=1761909252000&api=v2)

06. Перейдите на вкладку **Модификации**.
07. Нажмите **Добавить**, выберите созданный в шаге 3 MST-файл и нажмите **ОК**.

    ![](https://dev.rutoken.ru/download/attachments/223117321/select_mst.png?version=1&modificationDate=1761909252000&api=v2)
08. В поле **Имя файла** укажите полный UNC-путь до установочного MSI-пакета. Например:







    ```
     \\server.local\share\имя MSI-пакета
    ```

09. Нажмите **Открыть**.
10. В окне **Развертывание программ** установите флажок «назначенный» и нажмите **ОК**. Название выбранного MSI-пакета отобразится в правой части окна **Редактор управления групповыми политиками**.

    ![](https://dev.rutoken.ru/download/attachments/72451066/msi-paket.jpg?version=1&modificationDate=1595249177000&api=v2)

### Шаг 8. Завершите установку MSI-пакетов в клиентских операционных системах, входящих в домен

Для завершения установки MSI-пакетов в клиентских операционных системах, входящих в домен, перезагрузите каждую клиентскую операционную систему. В результате в системах отобразятся уведомления об установке. После того, как уведомления закроются, MSI-пакеты можно считать установленными.

## Обновление модифицированного комплекта

1. Перед началом обновления комплекта драйверов рекомендуется закрыть все работающие приложения и отсоединить устройства Рутокен от компьютера.
2. Важно, чтобы все действия выполнялись под учетной записью пользователя с правами администратора.

Для обновления модифицированного комплекта драйверов:

01. Перейдите в [Центр загрузки](https://www.rutoken.ru/support/download/windows/#msi) и скачайте новый пакет драйверов для своей версии Windows.
02. Примите лицензионное соглашение и дождитесь автоматического скачивания пакета.
03. Сгенерируйте для него MST-файл с необходимыми модификациями [по инструкции выше](https://dev.rutoken.ru/pages/viewpage.action?pageId=223117321#id-%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC%D0%BE%D0%B4%D0%B8%D1%84%D0%B8%D1%86%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC%D0%BA%D0%BE%D0%BC%D0%BF%D0%BB%D0%B5%D0%BA%D1%82%D0%BE%D0%BC%D0%B4%D1%80%D0%B0%D0%B9%D0%B2%D0%B5%D1%80%D0%BE%D0%B2%D1%81%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%BE%D0%B2%D1%8B%D1%85%D0%BF%D0%BE%D0%BB%D0%B8%D1%82%D0%B8%D0%BA-generate-mst).
04. Переместите загруженный MSI-пакет в созданную ранее папку в сети.
05. Откройте **Администрирование**.
06. Два раза щелкните по названию оснастки **Управление групповой политикой**.
07. В левой части окна **Управление групповой политикой** нажмите правой кнопкой мыши на объект **Rutoken** и выберите пункт **Изменить.** **![](https://dev.rutoken.ru/download/attachments/72451066/modify-Rutoken.jpg?version=2&modificationDate=1595249224000&api=v2)**
08. В левой части окна **Редактор управления групповыми политиками** нажмите правой кнопкой мыши на политику **Установка программ** и выберите **Создать** **→ Пакет.** **![](https://dev.rutoken.ru/download/attachments/72451066/package-for-upgrade.jpg?version=1&modificationDate=1595249276000&api=v2)**
09. В поле **Имя файла** укажите полный UNC-путь до установочного MSI-пакета. Например:





    ```
    \\server.local\share\имя MSI-пакета
    ```

10. Нажмите **Открыть**.
11. В окне **Развертывание программ** установите флажок «особый» и нажмите **ОК**. Откроется окно свойств пакета.
12. Перейдите на вкладку **Модификации**, нажмите **Добавить** и выберите сгенерированный в пункте 3 MST-файл.
13. Перейдите на вкладку **Обновления** и нажмите **Добавить**.

    ![](https://dev.rutoken.ru/download/attachments/72451066/updates-tab.jpg?version=1&modificationDate=1595249311000&api=v2)
14. В окне **Добавление обновления** щелкните левой кнопкой мыши по названию приложения "Rutoken Drivers".
15. Установите флажок «Обновление возможно поверх имеющегося приложения» и нажмите **ОК**.

    ![](https://dev.rutoken.ru/download/attachments/72451066/update.png?version=1&modificationDate=1595249346000&api=v2)
16. Для завершения процесса обновления нажмите **ОК**. В результате название MSI-пакета, используемого для обновления текущего пакета драйверов, отобразится в правой части окна **Редактор управления групповыми политиками.**

    **![](https://dev.rutoken.ru/download/attachments/72451066/name-of-the-package-to-upgrade.jpg?version=1&modificationDate=1595249378000&api=v2)**
17. Чтобы начать обновление MSI-пакетов на клиентских операционных системах, входящих в домен, перезагрузите каждую клиентскую операционную систему. После перезагрузки в системах отобразятся уведомления об удалении драйверов Рутокен, а затем об установке новых драйверов. После того, как уведомления закроются, MSI-пакеты можно считать обновленными.

- No labels